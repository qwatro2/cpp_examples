# Умные указатели

В этой задаче вам нужно реализовать свои аналоги `std::shared_ptr` и `std::weak_ptr`. В качестве объекта выступает
`std::string`.

Шаблонный класс std::shared_ptr предоставляет интерфейс указателя на данные в динамической области с автоматическим контролем своевременного выделения и удаления ресурсов. В отличие от std::unique_ptr, std::shared_ptr реализует семантику разделяемого владения ресурсом, что означает, что у одного ресурса может быть несколько равноправных владельцев. При этом гарантируется, что ресурс не будет освобожден пока существует хотя бы один его владелец (хотя бы один объект std::shared_ptr указывает на ресурс). Для решения проблемы циклических ссылок в язык также введены "слабые указатели" std::weak_ptr, которые не считаются полноценными владельцами ресурса, но из них при необходимости можно получить "сильный указатель" std::shared_ptr на объект, если тот еще не удален.

Несмотря на то, что std::shared_ptr удобнее в использовании чем std::unique_ptr, на практике последний работает гораздо эффективней - std::shared_ptr реализует дополнительную логику с подсчетом ссылок на объект. Поэтому std::shared_ptr стоит использовать только тогда, когда вам действительно нужно разделяемое владение.

WeakPtr - аналог std::weak_ptr, а также функцию MakeShared - аналог std::make_shared. Для поддержки "слабых" ссылок (см. выше) предлагается вынести счетчик обычных (сильных) ссылок strong_count в отдельную структуру Counter, в которую дополнительно добавить поле weak_count для подсчета количества слабых указателей, указывающих на данный объект. Как и ранее, сам счетчик (объект Counter) должен находиться в динамической памяти (вспомните почему), а указатель на него храниться в соответствующих объектах SharedPtr и WeakPtr. Логика освобождения ресурса теперь следующая:

Если число сильных и слабых ссылок стало равно нулю, то удаляется и объект, и выделенный для него счетчик Counter.

Если число сильных стало равно нулю при ненулевом числе слабых, то удаляется только объект, счетчик остается жить (то есть все сильные указатели уже "умерли", а некоторые слабые все еще ссылаются на данный счетчик).

В этой задаче мы используем принцип TDD (Test-Driven Development) ---
реализуйте все необходимые методы, чтобы прошли тесты.
